C51 COMPILER V9.00   LED_DISPLAY                                                           03/15/2024 18:23:12 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LED_DISPLAY
OBJECT MODULE PLACED IN led_display.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE led_display.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          //数码管动态显示12345678
   2          #include <reg52.h> //51头文件   
   3          
   4          #define uchar unsigned char//宏定义
   5          #define uint  unsigned int //宏定义
   6          sbit we = P2^7; //位定义数码管位选锁存器接口
   7          sbit du = P2^6; //位定义数码管段选锁存器接口
   8          //数码管段选表
   9          uchar code leddata[]={ 
  10           
  11                          0x3F,  //"0"
  12                          0x06,  //"1"
  13                          0x5B,  //"2"
  14                          0x4F,  //"3"
  15                          0x66,  //"4"
  16                          0x6D,  //"5"
  17                          0x7D,  //"6"
  18                          0x07,  //"7"
  19                          0x7F,  //"8"
  20                          0x6F,  //"9"
  21                          0x77,  //"A"
  22                          0x7C,  //"B"
  23                          0x39,  //"C"
  24                          0x5E,  //"D"
  25                          0x79,  //"E"
  26                          0x71,  //"F"
  27                          0x76,  //"H"
  28                          0x38,  //"L"
  29                          0x37,  //"n"
  30                          0x3E,  //"u"
  31                          0x73,  //"P"
  32                          0x5C,  //"o"
  33                          0x40,  //"-"
  34                          0x00,  //熄灭
  35                          0x00  //自定义
  36           
  37                                   };
  38          //毫秒级延时函数
  39          void delay(uint z)
  40          {
  41   1              uint x,y;
  42   1              for(x = z; x > 0; x--)
  43   1                      for(y = 114; y > 0 ; y--);
  44   1      }
  45          
  46          void main()
  47          {
  48   1                                      
  49   1                      while(1)
  50   1                      {
  51   2                              
  52   2                              P0 = 0xfe;//1111 1110 第一位数码管显示，注意数码管的排序，P0.0对应连接的是左边第一位数码管
  53   2                              we = 1;//打开位选
  54   2                              we = 0; //关闭位选
  55   2      
C51 COMPILER V9.00   LED_DISPLAY                                                           03/15/2024 18:23:12 PAGE 2   

  56   2                              P0 = leddata[1];
  57   2                              du = 1; //打开段选
  58   2                              du = 0; //关闭段选
  59   2                              delay(2);//延时
  60   2                              
  61   2                              P0 = 0xfd;//1111 1101  只选通第二位数码管
  62   2                              we = 1; //打开位选
  63   2                              we = 0; //关闭位选
  64   2                              
  65   2                              P0 = leddata[2]; //显示2
  66   2                              du = 1;//打开段选
  67   2                              du = 0; //关闭段选
  68   2                              delay(2);//延时
  69   2                              
  70   2                              P0 = 0xfb;// 1111 1011只选通第三位数码管
  71   2                              we = 1; //打开位选
  72   2                              we = 0; //关闭位选
  73   2                              
  74   2                              P0 = leddata[3]; //显示3
  75   2                              du = 1;//打开段选
  76   2                              du = 0; //关闭段选
  77   2                              delay(2);//延时
  78   2                              
  79   2                              P0 = 0xf7;//1111 0111  只选通第四位数码管
  80   2                              we = 1; //打开位选
  81   2                              we = 0; //关闭位选
  82   2                              
  83   2                              P0 = leddata[4]; //显示4
  84   2                              du = 1;//打开段选
  85   2                              du = 0; //关闭段选
  86   2                              delay(2);//延时
  87   2                              
  88   2                              P0 = 0xef;//1110 1111  只选通第五位数码管
  89   2                              we = 1; //打开位选
  90   2                              we = 0; //关闭位选
  91   2                              
  92   2                              P0 = leddata[5]; //显示5
  93   2                              du = 1;//打开段选
  94   2                              du = 0; //关闭段选
  95   2                              delay(2);//延时
  96   2                              
  97   2                              P0 = 0xdf;//1101 1111  只选通第六位数码管
  98   2                              we = 1; //打开位选
  99   2                              we = 0; //关闭位选
 100   2                              
 101   2                              P0 = leddata[6]; //显示6
 102   2                              du = 1;//打开段选
 103   2                              du = 0; //关闭段选
 104   2                              delay(2);//延时
 105   2                              
 106   2                              we = 1; //打开位选
 107   2                              P0 = 0xbf;//1011 1111  只选通第七位数码管
 108   2                              we = 0; //关闭位选
 109   2                              
 110   2                              P0 = leddata[7]; //显示7
 111   2                              du = 1;//打开段选
 112   2                              du = 0; //关闭段选
 113   2                              delay(2);//延时
 114   2                              
 115   2                              P0 = 0x7f;//0111 1111  只选通第八位数码管
 116   2                              we = 1; //打开位选
 117   2                              we = 0; //关闭位选
C51 COMPILER V9.00   LED_DISPLAY                                                           03/15/2024 18:23:12 PAGE 3   

 118   2                              
 119   2                              P0 = leddata[8]; //显示8
 120   2                              du = 1;//打开段选
 121   2                              du = 0; //关闭段选
 122   2                              delay(2);//延时 
 123   2                      }
 124   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    107    ----
   CONSTANT SIZE    =     25    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
